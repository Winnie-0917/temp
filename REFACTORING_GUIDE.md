# ğŸ“ Table Tennis AI - æ¶æ§‹é‡æ§‹èªªæ˜

## ğŸ“ æ–°ç‰ˆå°ˆæ¡ˆçµæ§‹

```
Table-tennis-AI/
â”œâ”€â”€ ğŸ“„ deploy.ps1              # Windows éƒ¨ç½²è…³æœ¬
â”œâ”€â”€ ğŸ“„ deploy.sh               # Linux/Mac éƒ¨ç½²è…³æœ¬
â”œâ”€â”€ ğŸ“„ docker-compose.yml      # åŸæœ‰é…ç½®ï¼ˆä¿ç•™ï¼‰
â”œâ”€â”€ ğŸ“„ docker-compose.dev.yml  # ğŸ†• é–‹ç™¼ç’°å¢ƒé…ç½®
â”œâ”€â”€ ğŸ“„ docker-compose.optimized.yml  # ğŸ†• ç”Ÿç”¢ç’°å¢ƒé…ç½®
â”œâ”€â”€ ğŸ“„ .env.example            # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
â”‚
â”œâ”€â”€ ğŸ“ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci-cd.yml          # ğŸ†• GitHub Actions CI/CD
â”‚
â”œâ”€â”€ ğŸ“ shared/                 # ğŸ†• å…±ç”¨æ¨¡çµ„
â”‚   â”œâ”€â”€ constants.py           # å…±ç”¨å¸¸æ•¸
â”‚   â”œâ”€â”€ types.py              # é¡å‹å®šç¾©
â”‚   â””â”€â”€ typescript_types.py   # TypeScript é¡å‹ç”Ÿæˆ
â”‚
â”œâ”€â”€ ğŸ“ backend/
â”‚   â”œâ”€â”€ ğŸ“„ app.py              # åŸæœ‰å…¥å£ï¼ˆä¿ç•™ï¼‰
â”‚   â”œâ”€â”€ ğŸ“„ app_new.py          # ğŸ†• é‡æ§‹å¾Œå…¥å£
â”‚   â”œâ”€â”€ ğŸ“„ config.py           # ğŸ†• çµ±ä¸€é…ç½®ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ routes/             # ğŸ†• è·¯ç”±æ¨¡çµ„
â”‚   â”‚   â”œâ”€â”€ __init__.py        # è—åœ–è¨»å†Š
â”‚   â”‚   â”œâ”€â”€ health_routes.py   # å¥åº·æª¢æŸ¥
â”‚   â”‚   â”œâ”€â”€ ranking_routes.py  # æ’å API
â”‚   â”‚   â”œâ”€â”€ analysis_routes.py # å‹•ä½œåˆ†æ
â”‚   â”‚   â”œâ”€â”€ training_routes.py # æ¨¡å‹è¨“ç·´
â”‚   â”‚   â””â”€â”€ failure_routes.py  # å¤±èª¤åˆ†æ
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ services/           # ğŸ†• æœå‹™å±¤
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ ranking_service.py
â”‚   â”‚   â”œâ”€â”€ prediction_service.py
â”‚   â”‚   â”œâ”€â”€ training_service.py
â”‚   â”‚   â””â”€â”€ failure_service.py
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile          # åŸæœ‰ Dockerfile
â”‚   â””â”€â”€ ğŸ“„ Dockerfile.optimized # ğŸ†• å„ªåŒ–ç‰ˆ Dockerfile
â”‚
â””â”€â”€ ğŸ“ frontend/
    â”œâ”€â”€ ğŸ“ app/
    â”‚   â”œâ”€â”€ ğŸ“ types/          # ğŸ†• é¡å‹å®šç¾©
    â”‚   â”‚   â””â”€â”€ index.ts
    â”‚   â””â”€â”€ ...
    â”‚
    â”œâ”€â”€ ğŸ“„ Dockerfile          # åŸæœ‰ Dockerfile
    â””â”€â”€ ğŸ“„ Dockerfile.optimized # ğŸ†• å„ªåŒ–ç‰ˆ Dockerfile
```

## ğŸ”§ æ¶æ§‹æ”¹é€²

### 1. å¾Œç«¯æ¨¡çµ„åŒ–

**åŸæœ¬å•é¡Œï¼š**
- æ‰€æœ‰è·¯ç”±å’Œæ¥­å‹™é‚è¼¯éƒ½åœ¨ `app.py` ä¸­ï¼ˆ400+ è¡Œï¼‰
- é›£ä»¥ç¶­è­·å’Œæ¸¬è©¦
- é—œæ³¨é»æ··é›œ

**æ”¹é€²æ–¹æ¡ˆï¼š**
```
routes/        â†’ è™•ç† HTTP è«‹æ±‚/éŸ¿æ‡‰
services/      â†’ æ¥­å‹™é‚è¼¯
config.py      â†’ çµ±ä¸€é…ç½®
```

### 2. é…ç½®ç®¡ç†

**åŸæœ¬å•é¡Œï¼š**
- ç’°å¢ƒè®Šæ•¸æ•£è½åœ¨å„è™•
- æ²’æœ‰é¡å‹æç¤º
- é›£ä»¥è¿½è¹¤ä½¿ç”¨æƒ…æ³

**æ”¹é€²æ–¹æ¡ˆï¼š**
```python
from config import get_config

config = get_config()
config.server.PORT      # ä¼ºæœå™¨ç«¯å£
config.ai.GEMINI_API_KEY  # AI API é‡‘é‘°
config.paths.UPLOAD_DIR   # ä¸Šå‚³ç›®éŒ„
```

### 3. Docker å„ªåŒ–

| é …ç›® | åŸæœ¬ | å„ªåŒ–å¾Œ |
|------|------|--------|
| æ˜ åƒå¤§å° | ~2GB | ~500MB |
| æ§‹å»ºæ™‚é–“ | ~10åˆ†é˜ | ~3åˆ†é˜ |
| å¿«å–åˆ©ç”¨ | å·® | å„ª |
| å®‰å…¨æ€§ | root ç”¨æˆ¶ | é root ç”¨æˆ¶ |

### 4. éƒ¨ç½²æµç¨‹

**ä¸€éµéƒ¨ç½²ï¼š**
```powershell
# Windows
.\deploy.ps1 deploy

# Linux/Mac
./deploy.sh deploy
```

**é–‹ç™¼æ¨¡å¼ï¼š**
```powershell
.\deploy.ps1 dev
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### é–‹ç™¼ç’°å¢ƒ

```powershell
# 1. è¤‡è£½ç’°å¢ƒè®Šæ•¸
Copy-Item backend\.env.example backend\.env

# 2. ç·¨è¼¯ .env å¡«å…¥ GEMINI_API_KEY

# 3. å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ
.\deploy.ps1 dev
```

### ç”Ÿç”¢ç’°å¢ƒ

```powershell
# 1. é…ç½®ç’°å¢ƒè®Šæ•¸
# 2. éƒ¨ç½²
.\deploy.ps1 deploy

# 3. å¥åº·æª¢æŸ¥
.\deploy.ps1 health
```

## ğŸ”„ é·ç§»æŒ‡å—

### å¾èˆŠç‰ˆé·ç§»

1. **ä¿ç•™åŸæœ‰æª”æ¡ˆ**
   - `app.py` ä¿æŒä¸è®Šï¼Œå¯ç¹¼çºŒä½¿ç”¨
   - æ–°ç‰ˆå…¥å£ç‚º `app_new.py`

2. **æ¸¬è©¦æ–°ç‰ˆ**
   ```bash
   cd backend
   python app_new.py
   ```

3. **åˆ‡æ›ç”Ÿç”¢ç’°å¢ƒ**
   - ä¿®æ”¹ `Dockerfile` ä¸­çš„å…¥å£é»
   - æˆ–ä½¿ç”¨ `Dockerfile.optimized`

### ç’°å¢ƒè®Šæ•¸é·ç§»

| èˆŠè®Šæ•¸å | æ–°è®Šæ•¸å | èªªæ˜ |
|----------|----------|------|
| `PORT` | `PORT` | ä¸è®Š |
| `GEMINI_API_KEY` | `GEMINI_API_KEY` | ä¸è®Š |
| - | `SCHEDULER_ENABLED` | æ–°å¢ï¼šæ§åˆ¶æ’ç¨‹å™¨ |
| - | `DEBUG` | æ–°å¢ï¼šé™¤éŒ¯æ¨¡å¼ |

## ğŸ“Š æœªä¾†ç™¼å±•æ–¹å‘

### Phase 1: åŸºç¤ç©©å®š âœ…
- [x] æ¨¡çµ„åŒ–æ¶æ§‹
- [x] é…ç½®ç®¡ç†
- [x] Docker å„ªåŒ–
- [x] CI/CD é…ç½®

### Phase 2: åŠŸèƒ½å¢å¼·ï¼ˆå»ºè­°ï¼‰
- [ ] æ·»åŠ  Redis å¿«å–
- [ ] WebSocket å³æ™‚é€šè¨Š
- [ ] å¤šèªè¨€æ”¯æ´
- [ ] ä½¿ç”¨è€…èªè­‰ç³»çµ±

### Phase 3: è¦æ¨¡æ“´å±•ï¼ˆå»ºè­°ï¼‰
- [ ] Kubernetes éƒ¨ç½²
- [ ] è² è¼‰å‡è¡¡
- [ ] åˆ†æ•£å¼è¨“ç·´
- [ ] CDN åŠ é€Ÿ

### Phase 4: AI å¼·åŒ–ï¼ˆå»ºè­°ï¼‰
- [ ] è‡ªè¨‚ AI æ¨¡å‹
- [ ] å³æ™‚å½±ç‰‡åˆ†æ
- [ ] 3D å§¿æ…‹é‡å»º
- [ ] è¨“ç·´å»ºè­°ç”Ÿæˆ

## ğŸ“ é–‹ç™¼è¦ç¯„

### ç¨‹å¼ç¢¼é¢¨æ ¼
- Python: PEP 8
- TypeScript: ESLint + Prettier
- æäº¤è¨Šæ¯: Conventional Commits

### åˆ†æ”¯ç­–ç•¥
```
main     â†’ ç©©å®šç‰ˆæœ¬
develop  â†’ é–‹ç™¼æ•´åˆ
feature/ â†’ åŠŸèƒ½é–‹ç™¼
hotfix/  â†’ ç·Šæ€¥ä¿®å¾©
```

### API è¨­è¨ˆ
- RESTful é¢¨æ ¼
- çµ±ä¸€å›æ‡‰æ ¼å¼
- éŒ¯èª¤è™•ç†æ¨™æº–åŒ–

## ğŸ”— ç›¸é—œé€£çµ

- [API æ–‡ä»¶](./docs/API.md)
- [éƒ¨ç½²æŒ‡å—](./DEPLOYMENT_SUMMARY.md)
- [Zeabur éƒ¨ç½²](./ZEABUR_DEPLOYMENT.md)
