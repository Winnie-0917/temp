# ğŸ¤– å¤±èª¤åˆ†æåŠŸèƒ½ - å¿«é€Ÿä½¿ç”¨æŒ‡å—

## âœ… å·²å®Œæˆçš„è¨­ç½®

1. âœ… Gemini API é‡‘é‘°å·²é…ç½®åœ¨ `backend/.env`
2. âœ… Docker Compose å·²æ›´æ–°æ”¯æŒç’°å¢ƒè®Šæ•¸
3. âœ… å¾Œç«¯ API ç«¯é»å·²æ·»åŠ 
4. âœ… æ¸¬è©¦é é¢å·²å‰µå»º

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### æ–¹æ³• 1: ä½¿ç”¨æ¸¬è©¦é é¢ï¼ˆæ¨è–¦ï¼‰

1. **å•Ÿå‹• Docker å®¹å™¨**
   ```powershell
   docker-compose up -d --build
   ```

2. **è¨ªå•å¤±èª¤åˆ†æé é¢**
   ```
   http://localhost:5000/failure_analysis.html
   ```

3. **ä¸Šå‚³å½±ç‰‡**
   - é»æ“Šä¸Šå‚³å€åŸŸæˆ–æ‹–æ›³å½±ç‰‡
   - æ”¯æ´æ ¼å¼ï¼šMP4, AVI, MOV, MKV
   - å»ºè­°æ™‚é•·ï¼š3-5 ç§’

4. **é¸æ“‡åˆ†ææ¨¡å¼**
   - âœ… **ä½¿ç”¨ Gemini AI æ·±åº¦åˆ†æ**ï¼ˆæ¨è–¦ï¼‰- ç²å¾—è‡ªç„¶èªè¨€å»ºè­°
   - âŒ **åŸºç¤åˆ†ææ¨¡å¼** - åƒ…ä½¿ç”¨ MediaPipe åˆ†æ

5. **æŸ¥çœ‹çµæœ**
   - å¤±èª¤åŸå› 
   - å•é¡Œé¡åˆ¥
   - è©³ç´°åˆ†æï¼ˆç«™ä½ã€æ‹é¢è§’åº¦ã€èº«é«”å¹³è¡¡ã€æ“Šçƒæ™‚æ©Ÿï¼‰
   - æ”¹é€²å»ºè­°
   - æŠ€è¡“æ•¸æ“š

---

### æ–¹æ³• 2: ä½¿ç”¨ APIï¼ˆç¨‹å¼åŒ–å‘¼å«ï¼‰

#### ç«¯é» 1: åˆ†æå–®ä¸€å½±ç‰‡
```bash
curl -X POST http://localhost:5000/api/analyze-failure \
  -F "file=@failure_video.mp4" \
  -F "use_gemini=true"
```

#### ç«¯é» 2: æ‰¹æ¬¡åˆ†æ
```bash
curl -X POST http://localhost:5000/api/analyze-failure/batch \
  -F "files=@video1.mp4" \
  -F "files=@video2.mp4" \
  -F "use_gemini=true"
```

#### ç«¯é» 3: æª¢æŸ¥é…ç½®
```bash
curl http://localhost:5000/api/analyze-failure/config
```

---

## ğŸ“Š åˆ†æçµæœç¯„ä¾‹

```json
{
  "success": true,
  "analysis": {
    "ai_analysis": {
      "failure_reason": "é¸æ‰‹åœ¨å›æ“Šæ™‚ç«™ä½éè¿‘ï¼Œæ‹é¢éæ–¼å¾Œä»°ï¼Œå°è‡´å›çƒå‡ºç•Œ",
      "category": "ç«™ä½éŒ¯èª¤",
      "detailed_analysis": {
        "stance": "ç«™ä½è·é›¢çƒå°éè¿‘ï¼Œå½±éŸ¿æ“Šçƒç©ºé–“",
        "racket_angle": "æ‹é¢å¾Œä»°è§’åº¦éå¤§ï¼ˆç´„60åº¦ï¼‰ï¼Œä¸åˆ©æ–¼æ§åˆ¶å¼§ç·š",
        "body_balance": "é‡å¿ƒåå¾Œï¼Œæ“Šçƒæ™‚æœªèƒ½å……åˆ†è½‰ç§»é‡å¿ƒ",
        "timing": "æ“Šçƒæ™‚æ©Ÿç¨æ™šï¼Œæœªåœ¨ä¸Šå‡æœŸæ“Šçƒ"
      },
      "improvement_suggestions": [
        "ç·´ç¿’ç«™ä½ï¼Œä¿æŒèˆ‡çƒå°é©ç•¶è·é›¢ï¼ˆç´„1-1.5å€‹æ‰‹è‡‚é•·åº¦ï¼‰",
        "èª¿æ•´æ‹é¢è§’åº¦ï¼Œæ“Šçƒæ™‚ä¿æŒæ‹é¢ç¨å¾®å‰å‚¾",
        "åŠ å¼·é‡å¿ƒè½‰ç§»è¨“ç·´ï¼Œæ“Šçƒæ™‚é‡å¿ƒç”±å¾Œå‘å‰ç§»å‹•"
      ],
      "summary": "ç«™ä½éè¿‘ï¼Œæ‹é¢å¾Œä»°ï¼Œéœ€æ”¹å–„ç«™ä½å’Œæ‹é¢æ§åˆ¶",
      "severity": "moderate"
    },
    "structured_data": {
      "video_info": {
        "duration_seconds": 4.2,
        "analyzed_frames": 5
      },
      "pose_analysis": {
        "avg_racket_angle": 58.3,
        "racket_angle_variance": 245.7
      },
      "technical_indicators": {
        "stance": "too_tilted",
        "racket_control": "unstable",
        "body_balance": "stable"
      }
    }
  }
}
```

---

## ğŸ”§ ç–‘é›£æ’è§£

### å•é¡Œ 1: Gemini API éŒ¯èª¤
**æª¢æŸ¥ API é‡‘é‘°ï¼š**
```powershell
# æŸ¥çœ‹ .env æª”æ¡ˆ
cat backend\.env
```

ç¢ºèª `GEMINI_API_KEY` å·²æ­£ç¢ºè¨­å®šã€‚

### å•é¡Œ 2: å®¹å™¨ç„¡æ³•å•Ÿå‹•
**æŸ¥çœ‹æ—¥èªŒï¼š**
```powershell
docker-compose logs backend
```

### å•é¡Œ 3: ç„¡æ³•è¨ªå•é é¢
**ç¢ºèªå®¹å™¨é‹è¡Œä¸­ï¼š**
```powershell
docker ps
```

æ‡‰è©²çœ‹åˆ° `tabletennis-backend` å®¹å™¨åœ¨é‹è¡Œã€‚

### å•é¡Œ 4: åˆ†æå¤±æ•—
**ç¢ºèªå½±ç‰‡æ ¼å¼ï¼š**
- æ”¯æ´ï¼šMP4, AVI, MOV, MKV
- æ™‚é•·ï¼šå»ºè­° 2-10 ç§’
- ç•«è³ªï¼šè‡³å°‘ 720p

---

## ğŸ“ API é‡‘é‘°ç²å–

1. è¨ªå• https://aistudio.google.com/app/apikey
2. ç™»å…¥ Google å¸³è™Ÿ
3. é»æ“Šã€ŒCreate API Keyã€
4. è¤‡è£½é‡‘é‘°åˆ° `backend/.env`ï¼š
   ```
   GEMINI_API_KEY=ä½ çš„é‡‘é‘°
   ```
5. é‡å•Ÿå®¹å™¨ï¼š
   ```powershell
   docker-compose restart backend
   ```

---

## ğŸ’¡ ä½¿ç”¨å»ºè­°

### å½±ç‰‡éŒ„è£½æŠ€å·§
- âœ… **æ™‚é•·**ï¼š3-5 ç§’ï¼ˆåŒ…å«å¤±åˆ†å‰å¾Œå‹•ä½œï¼‰
- âœ… **è§’åº¦**ï¼šå´é¢æˆ– 45 åº¦è§’
- âœ… **ç•«è³ª**ï¼š720p ä»¥ä¸Š
- âœ… **å…‰ç·š**ï¼šå……è¶³ä¸”å‡å‹»
- âœ… **ç¯„åœ**ï¼šåŒ…å«å®Œæ•´äººç‰©å’Œçƒå°

### åˆ†ææ¨¡å¼é¸æ“‡
- **Gemini AI æ·±åº¦åˆ†æ**ï¼šé©åˆéœ€è¦è©³ç´°å»ºè­°çš„æƒ…æ³
- **åŸºç¤åˆ†ææ¨¡å¼**ï¼šå¿«é€Ÿåˆ†ææˆ– API é…é¡æœ‰é™æ™‚ä½¿ç”¨

### æ•ˆèƒ½æœ€ä½³åŒ–
- å–®æ¬¡ä¸Šå‚³å½±ç‰‡å¤§å°ï¼š< 50MB
- æ‰¹æ¬¡åˆ†æï¼šæ¯æ‰¹ä¸è¶…é 10 å€‹å½±ç‰‡
- é—œéµå¹€æ•¸é‡ï¼š3-5 å¹€ï¼ˆå·²é è¨­ï¼‰

---

## ğŸ“š æ›´å¤šè³‡è¨Š

è©³ç´°æ–‡æª”è«‹åƒè€ƒï¼š
- [å®Œæ•´ä½¿ç”¨æŒ‡å—](backend/FAILURE_ANALYSIS_GUIDE.md)
- [API æ–‡æª”](README.MD#-api-æ–‡æª”)
- [æŠ€è¡“æ¶æ§‹èªªæ˜](backend/failure_analyzer.py)

---

**æœ€å¾Œæ›´æ–°**: 2024-11-12
**ç‰ˆæœ¬**: 1.0.0
**ç‹€æ…‹**: âœ… å·²éƒ¨ç½²ä¸¦å¯ç”¨
